<div class="container-fluid">

    <div class="ml-auto my-3" >
        <form action="/admin/gallery/upload" method="post" enctype="multipart/form-data">
            <input class='form-control' type="file" name="fileToUpload" id="fileToUpload">
            <input disabled="true" class='form-control' type="submit" value="Загрузить изображение (jpg)" name="submit">
        </form>

    </div>
    


    <div>
        <div class="card-columns">
            {{#each names}}
            <div class="card "> <img class="card-img-top" src="/img/gallery/{{this}}.jpg" alt="Card image cap">
                <div class="card-footer">
                    <p>{{this}}</p>                 
                        <input id="/img/gallery/{{this}}.jpg" class='delete-button form-control' type="submit" value="Удалить"></input>
                    
                </div>
            </div>
            {{/each}}
        </div>

    </div>


<script>

$(document).ready(function(){
  $(".delete-button").click(function(){
      $(this).parent().parent().css('display','none');
    $.post("/admin/gallery/delete", {filename:$(this).attr('id')});
  });

  $("#fileToUpload").change(function(){
      if ($(this).val().endsWith(".jpg")){
        $(this).css('background-color','#bfff00');
        $(this).siblings('.form-control').prop('disabled', false);
      } else{
        $(this).css('background-color','#EE0000');
        $(this).siblings('.form-control').prop('disabled', true);
      }

  });
});




</script>


</div>